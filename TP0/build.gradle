apply plugin: 'java'

version = '1.0'
ext {
  tp_number = '00'
}

repositories {
	mavenCentral()
}

dependencies {
    testImplementation 'junit:junit:4.12'
}

clean.doLast {
      // delete also files generated by mark task
      file("${rootDir}/TP${tp_number}.test").delete()
      file("${rootDir}/TP${tp_number}.html").delete()
}

task mark(type: JavaExec){
  group = 'verification'
  description = 'Runs other unit tests and Generates TP result.'
  dependsOn 'compileJava'
  main = "Tests"
  systemProperty "fichierScenario", "TP${tp_number}.test"
  classpath files([ "${buildDir}/classes/java/main", "install/test${tp_number}.jar" ])
  classpath sourceSets.test.runtimeClasspath // to find JUnit jar
}

task myTest(type: JavaExec){
  dependsOn compileJava
  dependsOn compileTestJava
  group = 'verification'
  description = 'Runs the unit tests in text mode.'
  main = "AllTests"
  classpath files([ "${buildDir}/classes/java/test" ]) // yaps test classes 
  classpath sourceSets.test.runtimeClasspath // to find JUnit jar
  classpath sourceSets.main.runtimeClasspath
}
